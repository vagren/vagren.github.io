<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Note.《跟月影学可视化》 | WebCourse</title>
    <meta name="description" content="A VitePress site">
    <link rel="stylesheet" href="/assets/style.49eed234.css">
    <link rel="modulepreload" href="/assets/Home.e7184701.js">
    <link rel="modulepreload" href="/assets/app.31a3e9dd.js">
    <link rel="modulepreload" href="/assets/topic_data-visualization_139_index.md.c8cbc858.lean.js">
    
    <meta name="twitter:title" content="Note.《跟月影学可视化》 | WebCourse">
  <meta property="og:title" content="Note.《跟月影学可视化》 | WebCourse">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="WebCourse, back to home" data-v-675d8756 data-v-cc01ef16><!----> WebCourse</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><!----></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><!----><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#_00-丨预习丨-web-前端与可视化到底有什么区别？">00 丨预习丨 Web 前端与可视化到底有什么区别？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#web-前端与可视化的区别">Web 前端与可视化的区别</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#可视化领域的工具">可视化领域的工具</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#区别">区别</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_01-浏览器中实现可视化的四种方式">01 | 浏览器中实现可视化的四种方式</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#方式一：html-css">方式一：HTML+CSS</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#方式二：svg">方式二：SVG</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#方式三：canvas2d">方式三：Canvas2D</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#方式四：webgl">方式四：WebGL</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#_02-指令式绘图系统：如何用canvas绘制层次关系图？">02 | 指令式绘图系统：如何用Canvas绘制层次关系图？</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#利用-svg-绘制几何图形">利用 SVG 绘制几何图形</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#利用-svg-绘制层次关系图">利用 SVG 绘制层次关系图</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#svg-和-canvas-的不同-123">SVG 和 Canvas 的不同 123</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#绘制大量几何图形时-svg-的性能问题">绘制大量几何图形时 SVG 的性能问题</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="note-《跟月影学可视化》" tabindex="-1">Note.《跟月影学可视化》 <a class="header-anchor" href="#note-《跟月影学可视化》" aria-hidden="true">#</a></h1><ul><li>课前必学|2</li><li>图形基础篇|4</li><li>数学篇|5</li><li>视觉基础篇|10</li><li>性能篇(3)</li></ul><h2 id="_00-丨预习丨-web-前端与可视化到底有什么区别？" tabindex="-1">00 丨预习丨 Web 前端与可视化到底有什么区别？ <a class="header-anchor" href="#_00-丨预习丨-web-前端与可视化到底有什么区别？" aria-hidden="true">#</a></h2><h3 id="web-前端与可视化的区别" tabindex="-1">Web 前端与可视化的区别 <a class="header-anchor" href="#web-前端与可视化的区别" aria-hidden="true">#</a></h3><p>数据可视化(Data Visualization)</p><p>可视化是将数据组织成易于被人所理解和认知的结构，然后用图形的方式形象地呈现出来的理论、方法和技术。 数据、图形</p><h4 id="web-前端-vs-web-可视化" tabindex="-1">Web 前端 vs. Web 可视化 <a class="header-anchor" href="#web-前端-vs-web-可视化" aria-hidden="true">#</a></h4><table><thead><tr><th>test</th><th>Web 前端</th><th>Web 可视化</th></tr></thead><tbody><tr><td>技术栈</td><td>html,css,javascript</td><td>JavaScript,Canvas,SVG,WebGL</td></tr><tr><td>关注点</td><td>着重于处理普通的文本和多媒体信息，渲染文本和多媒体内容</td><td>着重于处理结构化数据，渲染图表和图形元素</td></tr></tbody></table><h3 id="可视化领域的工具" tabindex="-1">可视化领域的工具 <a class="header-anchor" href="#可视化领域的工具" aria-hidden="true">#</a></h3><ul><li>图表库：chartlist, chart.js</li><li>地理库: Mapbox, Leaflet, <a href="http://Deck.gl" target="_blank" rel="noopener noreferrer">Deck.gl</a>, CensiumJS</li><li>渲染库: ThreesJS, SpriteJS, BabylonJS</li><li>数据驱动框架: d3.js</li></ul><h3 id="区别" tabindex="-1">区别 <a class="header-anchor" href="#区别" aria-hidden="true">#</a></h3><ul><li>Echarts 提供封装好的图表类型，只需简单的配置就可使用</li><li>d3.js 更关注与处理数据的组织形式，而将数据呈现交给更底层的图形系统(DOM、SVG、Canvas)</li></ul><h2 id="_01-浏览器中实现可视化的四种方式" tabindex="-1">01 | 浏览器中实现可视化的四种方式 <a class="header-anchor" href="#_01-浏览器中实现可视化的四种方式" aria-hidden="true">#</a></h2><p>可视化是将数据信息组织起来后，以图形的方式展现出来。</p><p>在 Web 上，图形通常是浏览器绘制的。浏览器负责绘制图形的部分是渲染引擎。 渲染引擎绘制图形的方式大体有 4 种。</p><ul><li>HTML+CSS: 通常呈现普通的 Web 网页；</li><li>SVG: 方便绘制矢量图形；</li><li>Canvas2D: 浏览器提供的 Canvas API 中的其中一种上下文，可以非常方便地绘制出基础的几何图形；</li><li>WegGL: 浏览器提供的 Canvas API 种的另一种上下文。适用于数据量大、视觉效果要求高的特殊场景；</li></ul><h3 id="方式一：html-css" tabindex="-1">方式一：HTML+CSS <a class="header-anchor" href="#方式一：html-css" aria-hidden="true">#</a></h3><p>与传统的 Web 应用相比，可视化项目，尤其是 PC 端的可视化大屏展现，不只是使用 HTML 与 CSS 相对较少，而且使用方式也不太一样。</p><p>一些简单的可视化图表，用 CSS 来实现很有好处，既能简化开发，又不需要引入额外的库，可以节省资源，提高网页打开的速度。</p><h4 id="如何实现可视化" tabindex="-1">如何实现可视化 <a class="header-anchor" href="#如何实现可视化" aria-hidden="true">#</a></h4><p>用 CSS 实现柱状图很简单，原理就是使用网格布局(Grid Layout)加上线性渐变(Linear-gradient).</p><div class="language-css line-numbers-mode"><pre><code><span class="token comment">/**
   dataset = {
     current: [15, 11, 17, 25, 37],
     total: [25, 26, 40, 45, 68],
   }
 */</span>
<span class="token selector">.bargraph</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
  <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scaleY</span><span class="token punctuation">(</span>3<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">repeat</span><span class="token punctuation">(</span>5<span class="token punctuation">,</span> 20%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bargraph div</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0 2px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bargraph div:nth-child(1)</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
    to bottom<span class="token punctuation">,</span>
    transparent 75%<span class="token punctuation">,</span>
    #37c 0<span class="token punctuation">,</span>
    #37c 85%<span class="token punctuation">,</span>
    #3c7 0
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bargraph div:nth-child(2)</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
    to bottom<span class="token punctuation">,</span>
    transparent 74%<span class="token punctuation">,</span>
    #37c 0<span class="token punctuation">,</span>
    #37c 89%<span class="token punctuation">,</span>
    #3c7 0
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bargraph div:nth-child(3)</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
    to bottom<span class="token punctuation">,</span>
    transparent 60%<span class="token punctuation">,</span>
    #37c 0<span class="token punctuation">,</span>
    #37c 83%<span class="token punctuation">,</span>
    #3c7 0
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bargraph div:nth-child(4)</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
    to bottom<span class="token punctuation">,</span>
    transparent 55%<span class="token punctuation">,</span>
    #37c 0<span class="token punctuation">,</span>
    #37c 75%<span class="token punctuation">,</span>
    #3c7 0
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bargraph div:nth-child(5)</span> <span class="token punctuation">{</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>
    to bottom<span class="token punctuation">,</span>
    transparent 32%<span class="token punctuation">,</span>
    #37c 0<span class="token punctuation">,</span>
    #37c 63%<span class="token punctuation">,</span>
    #3c7 0
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><ul><li>要实现饼图，我们可以使用圆锥渐变，方法也很简单，你直接看代码就可以理解。</li></ul><div class="language-css line-numbers-mode"><pre><code><span class="token selector">.piegraph</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 50%<span class="token punctuation">;</span>
  <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">conic-gradient</span><span class="token punctuation">(</span>
    #37c 30deg<span class="token punctuation">,</span>
    #3c7 30deg<span class="token punctuation">,</span>
    #3c7 65deg<span class="token punctuation">,</span>
    orange 65deg<span class="token punctuation">,</span>
    orange 110deg<span class="token punctuation">,</span>
    #f73 110deg<span class="token punctuation">,</span>
    #f73 200deg<span class="token punctuation">,</span>
    #ccc 200deg
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="用-html-css-实现可视化的缺点" tabindex="-1">用 HTML+CSS 实现可视化的缺点 <a class="header-anchor" href="#用-html-css-实现可视化的缺点" aria-hidden="true">#</a></h4><ul><li>HTML 和 CSS 主要还是为网页布局而创造的，使用它们虽然能绘制可视化图表，但是绘制的方式并不简洁。</li><li>一旦图表或数据发生改动，就需要我们重新计算数据与图形的对应关系，维护起来会很麻烦。</li><li>渲染引擎在渲染页面时工作很多。如浏览器的渲染引擎在工作时，要先解析 HTML、SVG、CSS，构建 DOM 树、RenderObject 树和 RenderLayer 树，然后用 HTML（或 SVG）绘图。当图形发生变化时，我们很可能要重新执行全部的工作，这样的性能开销是非常大的。 <img src="/assets/b3a681a976609c9cd98cfc657102f409321a6988b7789c8817650d6d5d84bf5a.b3a681a9.png" alt="picture 2"></li></ul><p>而可视化与传统网页不同，它不太需要复杂的布局，更多的工作是在绘图和数据计算。相比于 HTML 和 CSS，Canvas2D 和 WebGL 更适合去做可视化这一领域的绘图工作。它们的绘图 API 能够直接操作绘图上下文，一般不涉及引擎的其他部分，在重绘图像时，也不会发生重新解析文档和构建结构的过程，开销要小很多。</p><h3 id="方式二：svg" tabindex="-1">方式二：SVG <a class="header-anchor" href="#方式二：svg" aria-hidden="true">#</a></h3><p>SVG（Scalable Vector Graphics，可缩放矢量图），SVG 是一种基于 XML 语法的图像格式，可以用图片（img 元素）的 src 属性加载。</p><p>可以利用DOM API操作SVG元素。CSS也可以作用于内嵌的SVG元素。</p><p>HTML 的不足之处在于 HTML 元素的形状一般是矩形，虽然用 CSS 辅助，也能够绘制出各种其它形状的图形，甚至不规则图形，但是总体而言还是非常麻烦的。而 SVG 则弥补了这方面的不足，让不规则图形的绘制变得更简单了。因此，用 SVG 绘图比用 HTML 和 CSS 要便利得多。</p><h4 id="vg-图表缺点" tabindex="-1">VG 图表缺点 <a class="header-anchor" href="#vg-图表缺点" aria-hidden="true">#</a></h4><p>在渲染引擎中，SVG 元素和 HTML 元素一样，在输出图形前都需要经过引擎的解析、布局计算和渲染树生成。而且，一个 SVG 元素只表示一种基本图形，如果展示的数据很复杂，生成图形的 SVG 元素就会很多。这样一来，大量的 SVG 元素不仅会占用很多内存空间，还会增加引擎、布局计算和渲染树生成的开销，降低性能，减慢渲染速度。这也就注定了 SVG 只适合应用于元素较少的简单可视化场景。</p><h3 id="方式三：canvas2d" tabindex="-1">方式三：Canvas2D <a class="header-anchor" href="#方式三：canvas2d" aria-hidden="true">#</a></h3><p>使用 HTML/CSS 还是 SVG，它们都属于声明式绘图系统。Canvas2D 不同，是一种指令式的绘图系统。</p><p>为了实现更加复杂的效果，Canvas 还提供了非常丰富的设置和绘图 API，我们可以通过操作上下文，来改变填充和描边颜色，对画布进行几何变换，调用各种绘图指令，然后将绘制的图形输出到画布上。</p><p>Canvas 能够直接操作绘图上下文，不需要经过 HTML、CSS 解析、构建渲染树、布局等一系列操作。因此单纯绘图的话，Canvas 比 HTML/CSS 和 SVG 要快得多。</p><p>Canvas 和 SVG 的使用也不是非此即彼的，它们可以结合使用。因为 SVG 作为一种图形格式，也可以作为 image 元素绘制到 Canvas 中。举个例子，我们可以先使用 SVG 生成某些图形，然后用 Canvas 来渲染。这样，我们就既可以享受 SVG 的便利性，又可以享受 Canvas 的高性能了。</p><h3 id="方式四：webgl" tabindex="-1">方式四：WebGL <a class="header-anchor" href="#方式四：webgl" aria-hidden="true">#</a></h3><p>WebGL 是基于 OpenGL ES 规范的浏览器实现的，API 相对更底层，使用起来不如前三种那么简单直接。</p><p>在三种情况下我们有必要直接操作更强大的 GPU 来实现绘图。</p><ul><li>一、要绘制的图形数量非常多，比如有多达数万个几何图形需要绘制，而且它们的位置和方向都在不停地变化，那我们即使用 Canvas2D 绘制了，性能还是会达到瓶颈。这个时候，我们就需要使用 GPU 能力，直接用 WebGL 来绘制。</li><li>二、对较大图像的细节做像素处理，比如，实现物体的光影、流体效果和一些复杂的像素滤镜。</li><li>三、绘制 3D 物体</li></ul><p><img src="/assets/a443264705e09dc403d50df3ad9ce1a38b254b966f1fe76a3bde903a5e67dfb6.a4432647.png" alt="picture 3"></p><ol><li>svg 本质上是 Dom，是一种具有特殊属性的 Dom，Dom的优势和缺点它都具备，我们虽然可以像操作Dom那样方便地操作Canvas，但是不得不面对Dom性能低下的事实，所以 svg 只适合低动画需求、少元素数量需求的场景。</li><li>Canvas 本质上是基于底层图形系统的封装，在浏览器上形成的是一张图片，但是它只提供了绘制功能，因此它非常简陋，没有事件系统意味着我们无法像操作Dom一样绑定事件，每个Dom对应着一个具体图形，而 Canvas 中只有绘图指令，并没有单个图形的概念，我们无法操作单个图形，只有一张整体的图片，也正因此Canvas任何小的改动都会导致整个画布的重绘。</li></ol><h2 id="_02-指令式绘图系统：如何用canvas绘制层次关系图？" tabindex="-1">02 | 指令式绘图系统：如何用Canvas绘制层次关系图？ <a class="header-anchor" href="#_02-指令式绘图系统：如何用canvas绘制层次关系图？" aria-hidden="true">#</a></h2><p>SVG 的全称是 Scalable Vector Graphics，可缩放矢量图，它是浏览器支持的一种基于 XML 语法的图像格式。</p><h3 id="利用-svg-绘制几何图形" tabindex="-1">利用 SVG 绘制几何图形 <a class="header-anchor" href="#利用-svg-绘制几何图形" aria-hidden="true">#</a></h3><div class="language-html line-numbers-mode"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2000/svg<span class="token punctuation">&quot;</span></span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1.1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>40<span class="token punctuation">&quot;</span></span> <span class="token attr-name">stroke</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>black<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">stroke-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>orange<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>可以通过给 svg 元素设置 viewBox 属性，来改变 SVG 的坐标系。 如果设置了 viewBox 属性，那 SVG 内部的绘制就都是相对于 SVG 坐标系的了。</p><h3 id="利用-svg-绘制层次关系图" tabindex="-1">利用 SVG 绘制层次关系图 <a class="header-anchor" href="#利用-svg-绘制层次关系图" aria-hidden="true">#</a></h3><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">const</span> svgroot <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;svg&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">draw</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> node<span class="token punctuation">,</span> <span class="token punctuation">{</span>fillStyle <span class="token operator">=</span> <span class="token string">&#39;rgba(0, 0, 0, 0.2)&#39;</span><span class="token punctuation">,</span> textColor <span class="token operator">=</span> <span class="token string">&#39;white&#39;</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> r<span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">;</span>
    <span class="token keyword">const</span> circle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElementNS</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.w3.org/2000/svg&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;circle&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    circle<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;cx&#39;</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    circle<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;cy&#39;</span><span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    circle<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;r&#39;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">;</span>
    circle<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;fill&#39;</span><span class="token punctuation">,</span> fillStyle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    parent<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>circle<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token function">draw</span><span class="token punctuation">(</span>svgroot<span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="svg-和-canvas-的不同-123" tabindex="-1">SVG 和 Canvas 的不同 123 <a class="header-anchor" href="#svg-和-canvas-的不同-123" aria-hidden="true">#</a></h3><h4 id="_1-写法上的不同" tabindex="-1">1. 写法上的不同 <a class="header-anchor" href="#_1-写法上的不同" aria-hidden="true">#</a></h4><h4 id="_2-用户交互实现上的不同" tabindex="-1">2. 用户交互实现上的不同 <a class="header-anchor" href="#_2-用户交互实现上的不同" aria-hidden="true">#</a></h4><h3 id="绘制大量几何图形时-svg-的性能问题" tabindex="-1">绘制大量几何图形时 SVG 的性能问题 <a class="header-anchor" href="#绘制大量几何图形时-svg-的性能问题" aria-hidden="true">#</a></h3></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"base_docker_index.md\":\"c4bd007e\",\"base_index.md\":\"d0f9219b\",\"base_lerna_index.md\":\"36f37ead\",\"base_node_index.md\":\"727a6ebc\",\"base_npm_index.md\":\"a121fb80\",\"base_pnpm_index.md\":\"d70f5b25\",\"base_v8_index.md\":\"9ccd558d\",\"base_vitepress_index.md\":\"1ab28f4e\",\"base_wechat_index.md\":\"edbd69f5\",\"base_yarn_index.md\":\"64ea38b6\",\"hardware_index.md\":\"66e4f046\",\"index.md\":\"275d3d71\",\"topic_container_index.md\":\"91b61937\",\"topic_data-visualization_139_index.md\":\"c8cbc858\",\"topic_data-visualization_index.md\":\"478ef8e7\",\"topic_index.md\":\"8a38715f\"}")</script>
    <script type="module" async src="/assets/app.31a3e9dd.js"></script>
    
  </body>
</html>
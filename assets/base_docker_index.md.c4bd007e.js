import{_ as e,c as n,o as a,a as r}from"./app.31a3e9dd.js";var s="/assets/d01651f8383b9bf1685154611aa56f26549ad23f815e9273c0e1a4ebfe82a49a.d01651f8.png";const k='{"title":"Docker","description":"","frontmatter":{},"headers":[{"level":2,"title":"Docker Installing","slug":"docker-installing"},{"level":2,"title":"Docker \u914D\u7F6E","slug":"docker-\u914D\u7F6E"},{"level":2,"title":"Docker \u5E38\u7528\u547D\u4EE4","slug":"docker-\u5E38\u7528\u547D\u4EE4"},{"level":2,"title":"\u57FA\u7840\u77E5\u8BC6","slug":"\u57FA\u7840\u77E5\u8BC6"},{"level":3,"title":"\u6982\u5FF5","slug":"\u6982\u5FF5"},{"level":3,"title":"image \u955C\u50CF","slug":"image-\u955C\u50CF"},{"level":3,"title":"Container","slug":"container"},{"level":3,"title":"Docker \u5E38\u7528\u547D\u4EE4","slug":"docker-\u5E38\u7528\u547D\u4EE4-1"},{"level":3,"title":"Dockerfile","slug":"dockerfile"},{"level":2,"title":"\u8FDB\u9636","slug":"\u8FDB\u9636"},{"level":3,"title":"Docker Engine","slug":"docker-engine"},{"level":3,"title":"Docker \u67B6\u6784","slug":"docker-\u67B6\u6784"},{"level":3,"title":"Docker \u5E95\u5C42\u6280\u672F\u652F\u6301","slug":"docker-\u5E95\u5C42\u6280\u672F\u652F\u6301"},{"level":3,"title":"docker\u7684\u955C\u50CF\u5206\u5C42","slug":"docker\u7684\u955C\u50CF\u5206\u5C42"},{"level":2,"title":"Docker \u5B89\u88C5","slug":"docker-\u5B89\u88C5"},{"level":3,"title":"\u4F7F\u7528vagrant\u5B89\u88C5CentOS","slug":"\u4F7F\u7528vagrant\u5B89\u88C5centos"},{"level":3,"title":"CentOS\u5B89\u88C5Docker","slug":"centos\u5B89\u88C5docker"},{"level":3,"title":"\u6DFB\u52A0docker\u5230sudo","slug":"\u6DFB\u52A0docker\u5230sudo"}],"relativePath":"base/docker/index.md","lastUpdated":1642241996290}',l={},i=r(`<h1 id="docker" tabindex="-1">Docker <a class="header-anchor" href="#docker" aria-hidden="true">#</a></h1><h2 id="docker-installing" tabindex="-1">Docker Installing <a class="header-anchor" href="#docker-installing" aria-hidden="true">#</a></h2><h2 id="docker-\u914D\u7F6E" tabindex="-1">Docker \u914D\u7F6E <a class="header-anchor" href="#docker-\u914D\u7F6E" aria-hidden="true">#</a></h2><h2 id="docker-\u5E38\u7528\u547D\u4EE4" tabindex="-1">Docker \u5E38\u7528\u547D\u4EE4 <a class="header-anchor" href="#docker-\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a></h2><h2 id="\u57FA\u7840\u77E5\u8BC6" tabindex="-1">\u57FA\u7840\u77E5\u8BC6 <a class="header-anchor" href="#\u57FA\u7840\u77E5\u8BC6" aria-hidden="true">#</a></h2><h3 id="\u6982\u5FF5" tabindex="-1">\u6982\u5FF5 <a class="header-anchor" href="#\u6982\u5FF5" aria-hidden="true">#</a></h3><ul><li><p>Image \u955C\u50CF</p></li><li><p>Container \u5BB9\u5668: \u7C7B\u4F3C\u4E8E\u4E00\u4E2A\u8F7B\u7EA7\u7684\u6C99\u7BB1\uFF0CDocker \u5229\u7528\u5BB9\u5668\u6765\u8FD0\u884C\u548C\u9694\u79BB\u5E94\u7528\u3002</p></li><li><p>Repository \u4ED3\u5E93</p></li></ul><h3 id="image-\u955C\u50CF" tabindex="-1">image \u955C\u50CF <a class="header-anchor" href="#image-\u955C\u50CF" aria-hidden="true">#</a></h3><ul><li>image\u672C\u8EAB\u662F\u4E00\u4E2A read-only \u7684\u6587\u4EF6</li><li>\u8FD9\u4E2A\u6587\u4EF6\u5305\u542B\u6587\u4EF6\u7CFB\u7EDF\uFF0C\u6E90\u7801\uFF0C\u5E93\u6587\u4EF6\uFF0C\u4F9D\u8D56\uFF0C\u5DE5\u5177\u7B49\u4E00\u4E9B\u8FD0\u884Capplication\u6240\u9700\u8981\u7684\u6587\u4EF6</li><li>\u53EF\u4EE5\u7406\u89E3\u6210\u4E00\u4E2A\u6A21\u7248</li><li>layer, image \u662F\u5206\u5C42\u7684\uFF0C\u5E76\u4E14\u6BCF\u4E00\u5C42\u90FD\u53EF\u4EE5\u6DFB\u52A0\u6539\u53D8\u5220\u9664\u6587\u4EF6\uFF0C\u79F0\u4E3A\u4E00\u4E2A\u65B0\u7684image </li><li>\u4E0D\u540Cimage\u53EF\u4EE5\u5171\u4EAB\u76F8\u540C\u7684 layer</li></ul><h4 id="image\u7684\u83B7\u53D6\u65B9\u5F0F" tabindex="-1">image\u7684\u83B7\u53D6\u65B9\u5F0F <a class="header-anchor" href="#image\u7684\u83B7\u53D6\u65B9\u5F0F" aria-hidden="true">#</a></h4><ul><li><p>1.Build from Dockerfile</p><ul><li><div class="language-sh line-numbers-mode"><pre><code>docker build -t node:latest .
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li><li><p>2.Pull from Registry</p><ul><li><div class="language-sh line-numbers-mode"><pre><code>docker pull ubuntu:14.04
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul></li></ul><h3 id="container" tabindex="-1">Container <a class="header-anchor" href="#container" aria-hidden="true">#</a></h3><p>\u53EF\u4EE5\u628A\u5BB9\u5668\u770B\u4F5C\u4E00\u4E2A\u7B80\u6613\u7248\u7684 Linux \u7CFB\u7EDF\u73AF\u5883\uFF08\u5305\u62EC root \u7528\u6237\u6743\u9650\u3001\u8FDB\u7A0B\u7A7A\u95F4\u3001\u7528\u6237\u7A7A\u95F4\u548C\u7F51\u7EDC\u7A7A\u95F4\u7B49\uFF09\u4EE5\u53CA\u8FD0\u884C\u5728\u5176\u4E2D\u7684\u5E94\u7528\u7A0B\u5E8F\u6253\u5305\u800C\u6210\u7684\u76D2\u5B50\u3002</p><p>\u5B9E\u8D28\u4E0A\u662F\u590D\u5236image\u5E76\u5728image\u6700\u4E0A\u5C42\u52A0\u4E0A\u4E00\u5C42 read-write \u7684\u5C42\uFF0C\u79F0\u4E3A container layer. <img src="`+s+`" alt="picture 1"></p><blockquote><p>\u955C\u50CF\u81EA\u8EAB\u662F\u53EA\u8BFB\u7684 \u5BB9\u5668\u4ECE\u955C\u50CF\u542F\u52A8\u7684\u65F6\u5019\uFF0C\u4F1A\u5728\u955C\u50CF\u7684\u6700\u4E0A\u5C42\u521B\u5EFA\u4E00\u4E2A\u53EF\u5199\u5C42</p></blockquote><ul><li>\u901A\u8FC7 image \u521B\u5EFA \uFF08copy\uFF09</li><li>\u5728 image layer \u4E4B\u4E0A\u5EFA\u7ACB\u4E00\u4E2A container layer\uFF08\u53EF\u8BFB\u5199\uFF09</li><li>image\u8D1F\u8D23app\u7684\u5B58\u50A8\u548C\u5206\u53D1\uFF0Ccontainer\u8D1F\u8D23\u8FD0\u884Capp</li></ul><h3 id="docker-\u5E38\u7528\u547D\u4EE4-1" tabindex="-1">Docker \u5E38\u7528\u547D\u4EE4 <a class="header-anchor" href="#docker-\u5E38\u7528\u547D\u4EE4-1" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><pre><code>docker version
docker info

### images
docker images ls
docker pull &lt;image&gt;
docker run -it &lt;imageName|imageId&gt;
docker history -H --no-trunc &lt;imageId&gt;
docker rmi &lt;imageId&gt;
docker commit &lt;container&gt; [REPOSITORY[:TAG]] [flags]
docker build -t &lt;tagName&gt; &lt;REPOSITORY[:TAG]&gt;
docker push

### containers
docker ps -a

</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="dockerfile" tabindex="-1">Dockerfile <a class="header-anchor" href="#dockerfile" aria-hidden="true">#</a></h3><ul><li>FROM <ul><li>FROM scratch</li><li>FROM centos</li></ul></li><li>LABEL <ul><li>LABEL <a href="mailto:maintainer=%22xxx@qq.com">maintainer=&quot;xxx@qq.com</a>&quot;</li><li>LABEL version=&quot;1.0&quot;</li><li>LABEL description=&quot;this is a description&quot;</li></ul></li><li>RUN \u8FD0\u884C\u547D\u4EE4\uFF0C\u6BCF\u6267\u884C\u4E00\u6B21\u4F1A\u751F\u6210\u4E00\u5C42layer\uFF0C\u907F\u514D\u65E0\u7528\u5206\u5C42\uFF0C\u5408\u5E76\u591A\u6761\u547D\u4EE4\u6210\u4E00\u884C</li><li>WORKDIR \u6307\u5B9A\u5DE5\u4F5C\u76EE\u5F55\uFF0C\u5982\u679C\u6CA1\u6709\u4F1A\u81EA\u52A8\u521B\u5EFA\uFF0C\u7C7B\u4F3Clinux\u7684cd\u547D\u4EE4 <ul><li>WORKDIR /root</li><li>WORKDIR demo</li><li>RUN pwd # output: /root/demo</li></ul></li></ul><h2 id="\u8FDB\u9636" tabindex="-1">\u8FDB\u9636 <a class="header-anchor" href="#\u8FDB\u9636" aria-hidden="true">#</a></h2><h3 id="docker-engine" tabindex="-1">Docker Engine <a class="header-anchor" href="#docker-engine" aria-hidden="true">#</a></h3><ul><li>\u540E\u53F0\u8FDB\u7A0B(dockerd)</li><li>REST API Server</li><li>CLI\u63A5\u53E3 (docker)</li></ul><h3 id="docker-\u67B6\u6784" tabindex="-1">Docker \u67B6\u6784 <a class="header-anchor" href="#docker-\u67B6\u6784" aria-hidden="true">#</a></h3><h3 id="docker-\u5E95\u5C42\u6280\u672F\u652F\u6301" tabindex="-1">Docker \u5E95\u5C42\u6280\u672F\u652F\u6301 <a class="header-anchor" href="#docker-\u5E95\u5C42\u6280\u672F\u652F\u6301" aria-hidden="true">#</a></h3><ul><li>Namespaces\uFF08\u540D\u79F0\u7A7A\u95F4\uFF09: \u505A\u9694\u79BB pid, net, ipc, mnt, uts</li><li>cgroups, Control groups\uFF08\u63A7\u5236\u7EC4\uFF09: \u8FDB\u884C\u8D44\u6E90\u9694\u79BB</li><li>Union file systems\uFF08\u8054\u5408\u6587\u4EF6\u7CFB\u7EDF\uFF09\uFF1A Container\u548Cimage\u7684\u5206\u5C42</li></ul><h3 id="docker\u7684\u955C\u50CF\u5206\u5C42" tabindex="-1">docker\u7684\u955C\u50CF\u5206\u5C42 <a class="header-anchor" href="#docker\u7684\u955C\u50CF\u5206\u5C42" aria-hidden="true">#</a></h3><p>dockerfile\u4E2D\u7684\u6BCF\u4E00\u6761\u547D\u4EE4\uFF0C\u90FD\u4F1A\u6784\u5EFA\u4E00\u5C42\u6587\u4EF6\u3002</p><h2 id="docker-\u5B89\u88C5" tabindex="-1">Docker \u5B89\u88C5 <a class="header-anchor" href="#docker-\u5B89\u88C5" aria-hidden="true">#</a></h2><ul><li>virtualbox</li><li>vagrant</li></ul><h3 id="\u4F7F\u7528vagrant\u5B89\u88C5centos" tabindex="-1">\u4F7F\u7528vagrant\u5B89\u88C5CentOS <a class="header-anchor" href="#\u4F7F\u7528vagrant\u5B89\u88C5centos" aria-hidden="true">#</a></h3><div class="language-sh line-numbers-mode"><pre><code>vagrant init centos/7	# \u521D\u59CB\u5316\u914D\u7F6E
vagrant up	# \u542F\u52A8

vagrant ssh	# \u767B\u5F55\u865A\u62DF\u673A
vagrant status # \u67E5\u770B
vagrant halt	# \u505C\u6B62\u865A\u62DF\u673A
vagrant destory # \u5220\u9664\u865A\u62DF\u673A


# vagrant up \u521D\u59CB\u542F\u52A8\uFF0C\u9700\u8981\u4E0B\u8F7D\u955C\u50CF\uFF0C\u53EF\u79BB\u7EBF\u4E0B\u8F7D\u540Eadd
vagrant box list
vagrant box add &lt;name&gt; &lt;box_uri&gt;
# eg: vagrant box add centos/7 C:\\XSBDownload\\CentOS-7-x86_64-Vagrant-2004_01.VirtualBox.box
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="centos\u5B89\u88C5docker" tabindex="-1">CentOS\u5B89\u88C5Docker <a class="header-anchor" href="#centos\u5B89\u88C5docker" aria-hidden="true">#</a></h3><p><a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noopener noreferrer">Install Docker Engine on CentOS | Docker Documentation</a></p><div class="language-sh line-numbers-mode"><pre><code>sudo yum remove docker \\
                  docker-client \\
                  docker-client-latest \\
                  docker-common \\
                  docker-latest \\
                  docker-latest-logrotate \\
                  docker-logrotate \\
                  docker-engine
                  
sudo yum install -y yum-utils
sudo yum-config-manager \\
    --add-repo \\
    https://download.docker.com/linux/centos/docker-ce.repo

## 1.\u5B89\u88C5\u6700\u65B0\u7684Docker Enginer
sudo yum install docker-ce docker-ce-cli containerd.io

## 2.\u6216\u8005\u6307\u5B9A\u7248\u672C
yum list docker-ce --showduplicates | sort -r
sudo yum install docker-ce-&lt;VERSION_STRING&gt; docker-ce-cli-&lt;VERSION_STRING&gt; containerd.io

## 3.\u542F\u52A8 Docker
sudo systemctl start docker
## 4.\u6D4B\u8BD5
sudo docker run hello-world
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="\u6DFB\u52A0docker\u5230sudo" tabindex="-1">\u6DFB\u52A0docker\u5230sudo <a class="header-anchor" href="#\u6DFB\u52A0docker\u5230sudo" aria-hidden="true">#</a></h3><ul><li>\u62A5\u9519\u95EE\u9898</li></ul><div class="language-sh line-numbers-mode"><pre><code>[vagrant@10 ~]$ docker images
Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &quot;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/images/json&quot;: dial unix /var/run/docker.sock: connect: permission denied
[vagrant@10 ~]$ sudo docker images
REPOSITORY    TAG       IMAGE ID       CREATED        SIZE
hello-world   latest    feb5d9fea6a5   3 months ago   13.3kB
[vagrant@10 ~]$
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li><p>\u89E3\u51B3\u529E\u6CD5</p><div class="language-sh line-numbers-mode"><pre><code>sudo groupadd docker
sudo gpasswd -a vagrant docker
sudo kill -SIGHUB \${pidof dockerd} 	# \u91CD\u8F7D\u8FDB\u7A0B
exit
vagrant ssh
docker version
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><blockquote><p>docker.tips</p></blockquote>`,40),c=[i];function o(d,t,p,u,b,m){return a(),n("div",null,c)}var g=e(l,[["render",o]]);export{k as __pageData,g as default};
